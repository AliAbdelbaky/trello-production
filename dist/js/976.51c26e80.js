"use strict";(self["webpackChunktrello_app"]=self["webpackChunktrello_app"]||[]).push([[976],{6976:function(e,a,t){t.r(a),t.d(a,{default:function(){return V}});var s=t(3396),o=t(9242);const n={class:"board-page"};function r(e,a,t,r,l,d){const u=(0,s.up)("BaordCards"),m=(0,s.up)("router-view");return(0,s.wg)(),(0,s.iD)("div",n,[(0,s.Wm)(u,{columns:e.BoardModule.board.columns},null,8,["columns"]),d.isTaskOpen?((0,s.wg)(),(0,s.iD)("div",{key:0,onClick:a[0]||(a[0]=(0,o.iM)(((...e)=>d.closeTask&&d.closeTask(...e)),["self"])),class:"task-bg"},[(0,s.Wm)(m)])):(0,s.kq)("",!0)])}var l=t(7139);const d={class:"column-container"},u=["onDrop","onDragstart"],m={class:"card"},c={class:"card-header"},i={class:"card-body"},k=["onKeyup","onBlur"],p={class:"column"},T={class:"card"},v={class:"card-header"};function f(e,a,t,n,r,f){const D=(0,s.up)("ColumnTask");return(0,s.wg)(),(0,s.iD)("div",d,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.columns,((e,n)=>((0,s.wg)(),(0,s.iD)("div",{class:"column",key:n,draggable:"true",onDrop:a=>f.moveTaskOrColumn(a,e.tasks,n),onDragstart:(0,o.iM)((e=>f.pickupColumn(e,n)),["self"]),onDragover:a[0]||(a[0]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:a[1]||(a[1]=(0,o.iM)((()=>{}),["prevent"]))},[(0,s._)("div",m,[(0,s._)("div",c,(0,l.zw)(e.name),1),(0,s._)("div",i,[(0,s.Wm)(D,{tasks:e.tasks,columnIndex:n,columns:t.columns},null,8,["tasks","columnIndex","columns"])]),(0,s._)("input",{type:"text",class:"add_task_input",placeholder:"+ Enter new task",onKeyup:(0,o.D2)((a=>f.createTask(a,e.tasks)),["enter"]),onBlur:a=>f.createTask(a,e.tasks)},null,40,k)])],40,u)))),128)),(0,s._)("div",p,[(0,s._)("div",T,[(0,s._)("div",v,[(0,s.wy)((0,s._)("input",{type:"text",class:"add_column_input","onUpdate:modelValue":a[2]||(a[2]=e=>r.columnName=e),placeholder:"+ Enter new list",onKeyup:a[3]||(a[3]=(0,o.D2)(((...e)=>f.createColumn&&f.createColumn(...e)),["enter"])),onBlur:a[4]||(a[4]=(...e)=>f.createColumn&&f.createColumn(...e))},null,544),[[o.nr,r.columnName]])])])])])}const D={class:"tasks-list"},g=["onDragstart","onDrop"],h=["onClick"],C={class:"title"},x={key:0,class:"desc text-small"},M=["onClick"];function _(e,a,t,n,r,d){const u=(0,s.up)("BaseIcon");return(0,s.wg)(),(0,s.iD)("div",D,[((0,s.wg)(!0),(0,s.iD)(s.HY,null,(0,s.Ko)(t.tasks,((e,n)=>((0,s.wg)(),(0,s.iD)("div",{class:"task",key:n,draggable:"true",onDragstart:e=>d.pickupTask(e,n,t.columnIndex),onDragover:a[0]||(a[0]=(0,o.iM)((()=>{}),["prevent"])),onDragenter:a[1]||(a[1]=(0,o.iM)((()=>{}),["prevent"])),onDrop:(0,o.iM)((e=>d.moveTaskOrColumn(e,t.tasks,t.columnIndex,n)),["stop"])},[(0,s._)("div",{class:"wraaper",onClick:a=>d.goToTask(e.id)},[(0,s._)("span",C,(0,l.zw)(n+1)+" "+(0,l.zw)(e.name),1),e.description?((0,s.wg)(),(0,s.iD)("p",x,(0,l.zw)(e.description),1)):(0,s.kq)("",!0)],8,h),(0,s._)("div",{class:"delete-task",onClick:e=>d.deleteTask(n,t.columnIndex)},[(0,s.Wm)(u,{name:"trash-2"})],8,M)],40,g)))),128))])}var w={props:{tasks:{type:Object,required:!0},columnIndex:{type:[String,Number],required:!0},columns:{type:Array,required:!0}},methods:{goToTask(e){this.$router.push({name:"task",params:{id:e}})},deleteTask(e,a){this.$router.push({name:"board"}),this.$store.commit("BoardModule/REMOVE_TASK",{taskIndex:e,columnIndex:a,columns:this.columns})},moveTaskOrColumn(e,a,t,s){const o=e.dataTransfer.getData("type");"task"===o?this.moveTask(e,a,void 0!==s?s:a.length):this.moveColumn(e,t)},moveTask(e,a,t){const s=e.dataTransfer.getData("from-column-index"),o=this.columns[s].tasks,n=e.dataTransfer.getData("task-index");this.$store.commit("BoardModule/MOVE_TASK",{fromTasks:o,toTaskIndex:t,toTasks:a,taskIndex:n})},moveColumn(e,a){const t=e.dataTransfer.getData("from-column-index");this.$store.commit("BoardModule/MOVE_COLUMN",{fromColumnIndex:t,toColumnIndex:a})},pickupTask(e,a,t){e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("task-index",a),e.dataTransfer.setData("from-column-index",t),e.dataTransfer.setData("type","task")}}},y=t(89);const B=(0,y.Z)(w,[["render",_]]);var I=B,O={props:["columns"],components:{ColumnTask:I},data(){return{columnName:""}},methods:{createTask(e,a){""==!e.target.value&&(this.$store.commit("BoardModule/ADD_TASK",{tasks:a,name:e.target.value}),e.target.value="")},createColumn(){""==!this.columnName&&(this.$store.commit("BoardModule/ADD_COLUMN",this.columnName),this.columnName="")},pickupColumn(e,a){e.dataTransfer.effectAllowed="move",e.dataTransfer.dropEffect="move",e.dataTransfer.setData("from-column-index",a),e.dataTransfer.setData("type","column")},moveTaskOrColumn(e,a,t,s){const o=e.dataTransfer.getData("type");"task"===o?this.moveTask(e,a,void 0!==s?s:a.length):this.moveColumn(e,t)},moveColumn(e,a){const t=e.dataTransfer.getData("from-column-index");this.$store.commit("BoardModule/MOVE_COLUMN",{fromColumnIndex:t,toColumnIndex:a})},moveTask(e,a,t){const s=e.dataTransfer.getData("from-column-index"),o=this.columns[s].tasks,n=e.dataTransfer.getData("task-index");this.$store.commit("BoardModule/MOVE_TASK",{fromTasks:o,toTaskIndex:t,toTasks:a,taskIndex:n})}}};const b=(0,y.Z)(O,[["render",f]]);var $=b,E=t(4870),N=t(65),A={name:"BoardView",setup(){const e=(0,E.iH)("Board Vue");return{title:e}},components:{BaordCards:$},computed:{...(0,N.rn)(["BoardModule"]),isTaskOpen(){return"task"===this.$route.name}},methods:{closeTask(){this.$router.push({name:"board"})}}};const K=(0,y.Z)(A,[["render",r]]);var V=K}}]);
//# sourceMappingURL=976.51c26e80.js.map